version: 2
jobs:
  build:
    docker:
      - image: debian:stretch

    steps:
      - checkout

      - run:
          name: Installing SUDO
          command: 'apt-get update && apt-get install -y sudo && rm -rf /var/lib/apt/lists/*'

      - run:
          name: Installing GCC
          command: 'apt-get update && apt-get install -y gcc g++'

      - run:
          name: Build project
          command: 'gcc ./OWI_Code_Sample/Main.cpp -Wall -g -o owi_sample -lstdc++ -std=gnu++17'

      - run:
          name: Installing Valgrind
          command: 'apt-get update && apt-get install -y valgrind'

      - run:
          name: Valgrind Test
          command: 'valgrind ./owi_sample'
      
workflows:
  version: 2
  build:
    jobs:
      - build